{"componentChunkName":"component---src-templates-blog-post-js","path":"/writings/pt/google-maps-api-v3","result":{"data":{"markdownRemark":{"html":"<p>Neste post irei falar um pouco sobre a <a href=\"https://developers.google.com/maps/documentation/javascript/?hl=pt-BR\">API Google Maps V3</a>, que sofreu atualizações e veio com algumas melhorias e recursos adicionais para dispositivos móveis e desktops.</p>\n<p>No último projeto que participei, o designer incluiu no layout um mapa com width: 100%. Até ai nada demais, não é? Fui no Google Maps, digitei o endereço do local e incorporei o mapa ao meu projeto com aquele iframe lindo cheio de tags inúteis. Não é errado usar o embed do Google. É simples de incorporar no seu projeto, é relativamente fácil de manipular e deixar as dimensões do jeito que quiser, mas o código não é aquela coisa linda.</p>\n<p>Vamos ao que interessa. Irei descrever abaixo o passo a passo de como eu cheguei <a href=\"https://thulioph.github.io/mapa/\">neste resultado</a>. Depois de ler este post você conseguirá brincar bastante, personalizando o quanto quiser o seu mapa.</p>\n<h1>HTML</h1>\n<p>No HTML eu criei uma div que receberá o mapa.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mapa<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h1>CSS</h1>\n<p>Estilizei minha div determinando uma largura, altura e uma borda para melhor visualizá-la.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">#mapa</span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span> \n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span> \n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #ccc<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1>JS</h1>\n<p>Criei um arquivo com o nome de <strong>mapa.js</strong> onde terá todas as configurações e parâmetros do mapa e executei a chamada no html, que agora está com essa cara:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token name\">doctype</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>”pt,BR”</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>”UTF-8”</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>API Google Maps V3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>css/mapa.css<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>”js/mapa.js”</span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>”mapa”</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Criando minha chave API</h2>\n<p>Para começar a brincar será preciso criar uma chave de API, de acordo com as normas do Google, esta chave é necessária para suas aplicações serem monitoradas e terem um “cadastro”, assim o google poderá entrar em contato com você com relação a sua aplicação caso seja necessário. Como crio uma chave?</p>\n<ol>\n<li>Entre no site de <a href=\"\">Console de APIs</a></li>\n<li>Clique no lado esquerdo em <strong>Serviços</strong></li>\n<li>Ative o serviço <strong>API do Google Maps v3</strong></li>\n<li>No menu esquerdo clique no link <strong>acesso á api</strong>, a chave de acesso estará disponível nesta página na sessão <strong>Acesso Simples a API</strong>.</li>\n</ol>\n<h2>Exibindo um mapa simples</h2>\n<p>Agora que você já tem uma chave pode iniciar a brincadeira, e a primeira coisa a se fazer é mostrar o mapa do local no html. Como funciona?</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token comment\">// Exibir mapa;</span>\n  <span class=\"token keyword\">var</span> myLatlng <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">8.0631495</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">34.87131120000004</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> mapOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  zoom<span class=\"token operator\">:</span> <span class=\"token number\">17</span><span class=\"token punctuation\">,</span>\n  center<span class=\"token operator\">:</span> myLatlng<span class=\"token punctuation\">,</span>\n  mapTypeId<span class=\"token operator\">:</span> google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>MapTypeId<span class=\"token punctuation\">.</span><span class=\"token constant\">ROADMAP</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Exibir o mapa na div #mapa;</span>\n  <span class=\"token keyword\">var</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>“mapa”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mapOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>O que foi feito?</p>\n<h4>initialize()</h4>\n<p>Função que engloba todos os parâmetros e configurações do mapa.</p>\n<h4>myLatlng</h4>\n<p>Variável onde passo a latitude, longitude (nesta ordem) do local do mapa.</p>\n<h4>mapOptions</h4>\n<p>Objeto onde contém as variáveis de inicialização do mapa.</p>\n<h4>zoom</h4>\n<p>Define a resolução inicial do mapa, o quanto perto ou longe ele será, os valores podem ir de 0 até qualquer número.</p>\n<h4>center</h4>\n<p>Define que o mapa será em um ponto específico, ponto este passado na variável <strong>myLatlng</strong>.</p>\n<h4>mapTypeId</h4>\n<p>Define o tipo de mapa que será exibido: <strong>ROADMAP</strong> mapa padrão, <strong>SATELLITE</strong> blocos fotográficos, <strong>HYBRID</strong> rodovias, cidades, etc.., <strong>TERRAIN</strong> exibe montanhas, rios, etc..</p>\n<h4>map</h4>\n<p>Variável, atribui a ela um novo objeto <strong>Map</strong> passando as opções definidas no <strong>mapOptions</strong>;</p>\n<p>Para o mapa aparecer de fato no seu projeto, é preciso inserir o script da api do google maps, mas não vou declarar no html o script vou inseri-lo no meu <strong>mapa.js</strong> onde ele será carregado de forma assíncrona, melhorando o desempenho. Como faz?</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// Função para carregamento assíncrono</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">loadScript</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> script <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>“script”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  script<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> “text<span class=\"token operator\">/</span>javascript”<span class=\"token punctuation\">;</span>\n  script<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span>”https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>maps<span class=\"token punctuation\">.</span>googleapis<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>maps<span class=\"token operator\">/</span>api<span class=\"token operator\">/</span>js<span class=\"token operator\">?</span>key<span class=\"token operator\">=</span><span class=\"token constant\">SUA_API_KEY</span><span class=\"token operator\">&amp;</span>sensor<span class=\"token operator\">=</span>true_or_false<span class=\"token operator\">&amp;</span>callback<span class=\"token operator\">=</span>initialize”<span class=\"token punctuation\">;</span>\n\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n  window<span class=\"token punctuation\">.</span>onload <span class=\"token operator\">=</span> loadScript<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>O que foi feito?</p>\n<h4>loadScript</h4>\n<p>Função que faz este procedimento, ela cria através do js a tag script no seu documento html com todos os parâmetros passados abaixo.\nCriei um elemento script definindo o <strong>type</strong> e o <strong>src</strong> do mesmo.</p>\n<blockquote>\n<p>Para os parâmetros do <strong>script.src</strong> onde em <code class=\"language-text\">key</code> você terá que inserir a sua chave de API, em <code class=\"language-text\">sensor=true/false</code> você informa se sua aplicação usa algum sensor para determinar a localização do usuário gps e em <code class=\"language-text\">callback=initialize</code> você instrui a api para só executar a função <code class=\"language-text\">initialize()</code> após a api ser totalmente carregada.</p>\n</blockquote>\n<p>Até agora você conseguiu mostrar o mapa na div que foi declarada no html e carregou de forma assíncrona a API do Google Maps, está duvidando?\nVeja como ficou o <a href=\"https://gist.github.com/thulioph/8150735\">código até aqui</a> e teste na sua aplicação. \\o/</p>\n<h2>Modificando os controles do usuário</h2>\n<p>Quando acessamos algum mapa no <a href=\"https://www.google.com.br/maps/preview\">Google Maps</a> ele nos mostra alguns controles como: <strong>controle de zoom</strong>, <strong>panorâmico</strong>, <strong>controle de escala</strong>, <strong>controle de giro</strong> e <strong>mapa da visão geral</strong>, mas você pode personalizar e escolher o que quer disponibilizar para seu usuário. Caso não queira personalizar nada e deixar seu usuário com todas as configurações padrão, possibilitando que o Google futuramente adicione mais controles, não especifique nada, se você se parece comigo e gosta de “ser do contra” no bom sentido rsrs e quer personalizar, vamos lá!</p>\n<p>Para desabilitar todas as configurações automáticas do Google Maps defina a propriedade <code class=\"language-text\">disableDefaultUI: true</code> no objeto <code class=\"language-text\">Map</code> options.\nVocê também pode escolher quais controles seu usuário terá acesso, os controles só aceitam valores <strong>boolean</strong> e todos definidos dentro de <code class=\"language-text\">Map</code> options, esses controles são:</p>\n<h4>panControl</h4>\n<p>Controle Panorâmico, seus valores são <code class=\"language-text\">true</code> or <code class=\"language-text\">false</code>.</p>\n<h4>zoomControl</h4>\n<p>Controle de zoom, seus valores são <code class=\"language-text\">true</code> or <code class=\"language-text\">false</code>.</p>\n<h4>mapTypeControl</h4>\n<p>Controle de tipo de mapa, seus valores são <code class=\"language-text\">true</code> or <code class=\"language-text\">false</code>.</p>\n<h4>scaleControl</h4>\n<p>Controle de escala, seus valores são <code class=\"language-text\">true</code> or <code class=\"language-text\">false</code>.</p>\n<h4>streetViewControl</h4>\n<p>Controle do street view, seus valores são <code class=\"language-text\">true</code> or <code class=\"language-text\">false</code>.</p>\n<h4>overviewMapControl</h4>\n<p>Controle da visão geral, seus valores são <code class=\"language-text\">true</code> or <code class=\"language-text\">false</code>.</p>\n<p>No meu exemplo eu desativei o <strong>controle panorâmico</strong> e agora meu <code class=\"language-text\">mapOptions</code> ficou desta forma:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> mapOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  zoom<span class=\"token operator\">:</span> <span class=\"token number\">17</span><span class=\"token punctuation\">,</span>\n  center<span class=\"token operator\">:</span> myLatlng<span class=\"token punctuation\">,</span>\n  panControl<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  mapTypeId<span class=\"token operator\">:</span> google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>MapTypeId<span class=\"token punctuation\">.</span><span class=\"token constant\">ROADMAP</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Até este momento, você já consegue visualizar o mapa e escolher quais controles seu usuário terá acesso.\nNão duvide, apenas <a href=\"https://gist.github.com/thulioph/8151176\">veja como está ficando</a> e teste! \\o</p>\n<h2>Inserindo Pin Personalizado</h2>\n<p>O marcador do Google Maps é padrão, e você pode alterá-lo e inserir um pin personalizado e dar um efeito a ele.\nImagine que você quer colocar no seu site pessoal um mapa do bairro onde você mora e marcar a sua casa com um pin que será uma imagem sua pra que isso? rsrs vamos lá!</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// Marcador personalizado;</span>\n  <span class=\"token keyword\">var</span> image <span class=\"token operator\">=</span> ‘https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>cdn1<span class=\"token punctuation\">.</span>iconfinder<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>icons<span class=\"token operator\">/</span>gpsmapicons<span class=\"token operator\">/</span>blue<span class=\"token operator\">/</span>gpsmapicons01<span class=\"token punctuation\">.</span>png’<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> marcadorPersonalizado <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Marker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  position<span class=\"token operator\">:</span> myLatlng<span class=\"token punctuation\">,</span>\n  map<span class=\"token operator\">:</span> map<span class=\"token punctuation\">,</span>\n  icon<span class=\"token operator\">:</span> image<span class=\"token punctuation\">,</span>\n  title<span class=\"token operator\">:</span> ‘Marco Zero <span class=\"token operator\">-</span> Recife<span class=\"token operator\">/</span><span class=\"token constant\">PE</span>’<span class=\"token punctuation\">,</span>\n  animation<span class=\"token operator\">:</span> google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Animation<span class=\"token punctuation\">.</span><span class=\"token constant\">DROP</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>O que foi feito?</p>\n<h4>new google.maps.Marker</h4>\n<p>O construtor capaz de fazer isto.</p>\n<h4>marcadorPersonalizado</h4>\n<p>Variável que recebe algumas propriedades:</p>\n<ul>\n<li>position: especifica a localização do marcador e como eu quero que ele fique na minha localização, informo a variável que contém estas informações <strong>myLatlng</strong>.</li>\n<li>map: Especifica onde o marcador vai ser posicionado. Caso eu utilize o pin em mais algum local, criei uma variável <strong>image</strong> informando o caminho do meu pin. (valor opcional)</li>\n<li>icon: Especifica a imagem que será o marcador, aqui você inclui o caminho da imagem podendo ser absoluto ou relativo. A própria api irá redimensionar a imagem para o tamanho padrão.</li>\n<li>title: Especifica o texto que irá aparecer ao encostar o mouse em cima do pin.</li>\n<li>animation: Define alguma animação já definida pela api do google maps, os possíveis valores são <strong>DROP</strong> o marcador “cai do céu” para o local indicado e <strong>BOUNCE</strong> o marcador fica pulando no local indicado.</li>\n</ul>\n<p>Até aqui você está mostrando o mapa, personalizando os controles e modificando o pin para um de seu gosto e de quebra ainda consegue animá-los.\n<a href=\"https://gist.github.com/thulioph/8151788\">Veja como está ficando</a> até agora. /o/</p>\n<h2>Janela de informações no mapa</h2>\n<p>Em alguns mapas quando o usuário clica no pin do local é aberto uma espécie de balão de texto sobre aquele pin, com algumas informações tipo telefone, e-mail, ou qualquer coisa do gênero. Esta “janela” que se abre é chamada de janela de informações ou <code class=\"language-text\">InfoWindow</code> nome bastante óbvio rsrs, agora vamos inseri-la no nosso mapa. Dando continuidade ao exemplo anterior, agora você quer que quando o usuário clique na sua foto do mapa, apareça seus dados para contato, e-mail, telefone, etc. Mãos a obra!</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// Parâmetros do texto que será exibido no clique;</span>\n  <span class=\"token keyword\">var</span> contentString <span class=\"token operator\">=</span> ‘<span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>Marco Zero<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>’ <span class=\"token operator\">+</span> ‘<span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Praça Rio Branco<span class=\"token punctuation\">,</span> Recife<span class=\"token operator\">/</span><span class=\"token constant\">PE</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>’ <span class=\"token operator\">+</span> ‘<span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span>”https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>pt<span class=\"token punctuation\">.</span>wikipedia<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>wiki<span class=\"token operator\">/</span>Pra<span class=\"token operator\">%</span><span class=\"token constant\">C3</span><span class=\"token operator\">%</span><span class=\"token function\">A7a_Rio_Branco_</span><span class=\"token punctuation\">(</span>Recife<span class=\"token punctuation\">)</span>” target<span class=\"token operator\">=</span>”_blank”<span class=\"token operator\">></span>clique aqui para mais informações<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>’<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> infowindow <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>InfoWindow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  content<span class=\"token operator\">:</span> contentString<span class=\"token punctuation\">,</span>\n  maxWidth<span class=\"token operator\">:</span> <span class=\"token number\">700</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Exibir texto ao clicar no pin;</span>\ngoogle<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>event<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>marcadorPersonalizado<span class=\"token punctuation\">,</span> ‘click’<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  infowindow<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">,</span>marcadorPersonalizado<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>O que foi feito?</p>\n<h4>new google.maps.InfoWindow</h4>\n<p>Realiza toda a mágica.</p>\n<h4>content</h4>\n<p>Deverá ter uma string de texto ou nó no DOM para exibir na janela. Aqui dentro será inserido o conteúdo que você deseja que apareça no balão de informações. Caso queira utilizar esta string em outro local, criei uma variável com o nome <code class=\"language-text\">contentString</code> onde inseri as informações do balão.</p>\n<h4>maxWidth</h4>\n<p>Especifica em pixels a largura máxima do balão de informações. Por padrão a janela se expande para incluir o conteúdo e o texto é quebrado automaticamente, quando se aplica um valor no <code class=\"language-text\">maxWidth</code> você força um determinado tamanho para ela.</p>\n<blockquote>\n<p>É preciso atribuir um evento ao método <code class=\"language-text\">infowindow.open</code> caso contrário ele não será aberto no clique.\nO <code class=\"language-text\">google.maps.event.addListener</code> adiciona um evento de ‘click’ ao <code class=\"language-text\">marcadorPersonalizado</code>, isso irá disparar o método <code class=\"language-text\">infowindow.open</code> no <code class=\"language-text\">map</code> e no <code class=\"language-text\">marcadorPersonalizado</code>.\nAgora quando você clicar no pin irá abrir o balão de informações com o conteúdo da variável <code class=\"language-text\">contentString</code>.</p>\n</blockquote>\n<p>Mais um nível e esse foi tranquilo hein? Agora você já está mostrando o mapa, personalizando os controles e o pin, animando o pin e inseriu um balão de informações no clique do usuário.\nConfere <a href=\"https://gist.github.com/thulioph/8152405\">como está ficando</a> o código e vamos para o último passo! \\o\\ /o/</p>\n<h2>Modificando a cor do mapa</h2>\n<p>Pra completar o design do seu site, você queria pintar o mapa do seu bairro com sua cor favorita que é azul, para isso você precisará criar seu estilo e para inserir um estilo personalizado no seu mapa você precisa saber como é a matriz de estilos padrão para quando combinar os estilos obter o resultado que deseja. Vamos lá?</p>\n<h4>featureType</h4>\n<p>Especifica o tipo de mapa.</p>\n<h4>elementType</h4>\n<p>Especifica o tipo de elemento que será exibido no mapa, os valores suportados são: </p>\n<ul>\n<li>geometry: todos os elementos geométricos</li>\n<li>geometry.fill: seleciona apenas o preenchimento da geometria </li>\n<li>geometry.stroke: seleciona apenas a textura da geometria</li>\n<li>labels: seleciona apenas rótulos textuais</li>\n<li>labels.icon: seleciona apenas o ícone do rótulo</li>\n<li>labels.text seleciona apenas o texto do rótulo</li>\n<li>labels.text.fill seleciona apenas o preenchimento do rótulo</li>\n<li>labels.text.stroke seleciona apenas a textura do texto</li>\n</ul>\n<h4>stylers</h4>\n<p>É desta combinação de estilos que a cor irá se originar, os valores que você pode trabalhar são:</p>\n<ul>\n<li>hue: String hexadecimal RGB que indicará a cor básica.</li>\n<li>lightness: Indica o brilho do elemento, valores negativos aumentam a escuridão, este valor varia de -100 e 100.</li>\n<li>saturation: Intensidade da cor básica a ser aplicada, este valor varia de -100 e 100.</li>\n<li>gamma: Modificam a luminosidade das matizes, utilizados para modificar o contraste dos elementos, este valor varia entre 0.01 e 10.0.</li>\n<li>inverse_lightness: Se <code class=\"language-text\">true</code>, inverte a luminosidade existente.</li>\n<li>visibility: <code class=\"language-text\">on</code>, <code class=\"language-text\">off</code> ou <code class=\"language-text\">simplified</code>, indica como um elemento aparece no mapa.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// Criando um array com os estilos</span>\n<span class=\"token keyword\">var</span> styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n<span class=\"token punctuation\">{</span>\n  stylers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n   <span class=\"token punctuation\">{</span> hue<span class=\"token operator\">:</span> “#<span class=\"token number\">41</span>a7d5” <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">{</span> saturation<span class=\"token operator\">:</span> <span class=\"token number\">60</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">{</span> lightness<span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">20</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">{</span> gamma<span class=\"token operator\">:</span> <span class=\"token number\">1.51</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">{</span>\n  featureType<span class=\"token operator\">:</span> “road”<span class=\"token punctuation\">,</span>\n  elementType<span class=\"token operator\">:</span> “geometry”<span class=\"token punctuation\">,</span>\n  stylers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n   <span class=\"token punctuation\">{</span> lightness<span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token punctuation\">{</span> visibility<span class=\"token operator\">:</span> “simplified” <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">{</span>\n  featureType<span class=\"token operator\">:</span> “road”<span class=\"token punctuation\">,</span>\n  elementType<span class=\"token operator\">:</span> “labels”\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>O que foi feito?</p>\n<p>Criei uma matriz de estilos descrita acima, que nada mais é do que um array com os estilos do mapa, onde neste array é passado as cores e os estilos para exibição.\nAgora crio um novo objeto <code class=\"language-text\">google.maps.StyledMapType</code> passando a <strong>matriz que foi criada</strong> e um nome para o novo tipo de mapa.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> styledMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>StyledMapType</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> “Mapa Style”\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Crie o objeto do mapa e nas opções do mapa <code class=\"language-text\">mapOptions</code> inclua um identificador para o novo tipo de mapa <code class=\"language-text\">map_style</code>.\nIsto irá possibilitar o usuário a visualizar o mapa tradicional do Google <code class=\"language-text\">google.maps.MapTypeId.ROADMAP</code> e o seu mapa <code class=\"language-text\">map_style</code>.\nPara visualizar isto, observe no canto superior direito do mapa, se você desejar só disponibilizar o seu tipo de mapa, é só em <code class=\"language-text\">mapTypeIds</code> deixar o identificador do seu mapa.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">  mapTypeControlOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    mapTypeIds<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>MapTypeId<span class=\"token punctuation\">.</span><span class=\"token constant\">ROADMAP</span><span class=\"token punctuation\">,</span> ‘map_style’<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Associe o estilo do mapa com o <strong>MapTypeId</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">  map<span class=\"token punctuation\">.</span>mapTypes<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>‘map_style’<span class=\"token punctuation\">,</span> styledMap<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  map<span class=\"token punctuation\">.</span><span class=\"token function\">setMapTypeId</span><span class=\"token punctuation\">(</span>‘map_style’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>E é isso, agora você já está apto para inserir um mapa, personalizar controles e pin, animar o pin e customizar as cores do seu mapa.\nVeja o <a href=\"https://gist.github.com/thulioph/8153570\">código completo aqui</a>!</p>\n<h2>Referências</h2>\n<ul>\n<li><a href=\"https://developers.google.com/maps/documentation/javascript/tutorial?hl=pt-br/\">https://developers.google.com/maps/documentation/javascript/tutorial?hl=pt-br</a></li>\n<li>Photo by <a href=\"https://unsplash.com/@xavi_cabrera?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText\">Xavi Cabrera</a> on <a href=\"https://unsplash.com/s/photos/maps?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText\">Unsplash</a></li>\n</ul>\n<hr>\n<p>O post ficou enorme, mas espero que eu tenha sido bastante claro e tenha conseguido transmitir da melhor forma este conteúdo pois a API não é difícil, consegui fazer isso tudo em um único dia e vocês também podem.\nQualquer dúvida ou se acha que fiz algo de errado, entre em contato comigo ou deixa nos comentários.</p>","frontmatter":{"date":"January 10, 2014","path":"/writings/pt/google-maps-api-v3","title":"API Google Maps V3","imageSlug":"posts/api-google-maps-cover.jpg"},"fields":{"readingTime":{"text":"12 min read"}}}},"pageContext":{"pathSlug":"/writings/pt/google-maps-api-v3","prev":{"frontmatter":{"path":"/writings/pt/front-in-aracaju","title":"Front In Aracaju"}},"next":null}}}